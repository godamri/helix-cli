# --- IDENTITY ---
ENV=local
SERVICE_NAME={{ .ProjectName }}

# --- SERVER ---
PORT={{ .AppPort }}
GRPC_PORT={{ .GrpcPort }}
APP_MODE=all

# --- DATABASE (MAIN) ---
DB_DSN=postgres://dev:dev@helix-shared-db:5432/{{ .EntityPluralLower }}?sslmode=disable
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=5

# --- DATABASE (WORKER) ---
# Leave empty to reuse DB_DSN
WORKER_DB_DSN=postgres://dev:dev@helix-shared-db:5432/{{ .EntityPluralLower }}?sslmode=disable
WORKER_DB_MAX_OPEN_CONNS=10
WORKER_DB_MAX_IDLE_CONNS=2
WORKER_CONCURRENCY=10
WORKER_BATCH_SIZE=50
WORKER_POLL_INTERVAL=200ms
WORKER_ENABLE_RESCUE=false



# --- REDIS ---
REDIS_ADDR={{ .ProjectName }}-redis:6379

# --- KAFKA ---
KAFKA_BROKERS={{ .ProjectName }}-redpanda:29092

#Durasi kunci idempotency disimpan di Redis
IDEMPOTENCY_EXPIRY=1h
#console | kafka
AUDIT_OUTPUT=kafka
AUDIT_TOPIC=system.audit.events
AUDIT_BUFFER_SIZE=100

# --- AUTH ---
AUTH_ENABLED=false
#AUTH_JWKS_URL=
#AUTH_ISSUER=
AUTH_JWKS_REFRESH_INTERVAL=1h
AUTH_JWKS_MAX_STALE=24h
# AUTH_JWKS_URL=http://localhost:4444/.well-known/jwks.json
# AUTH_ISSUER=http://localhost:4444/

# --- WORKER TUNING ---
WORKER_BATCH_SIZE=50
WORKER_POLL_INTERVAL=1s
WORKER_CONCURRENCY=10